<div class="container" *ngIf="isLoggedIn; else notLoggedIn">
  <div *ngIf="cart">
    <h2>Cesta del Usuario</h2>
    <div *ngFor="let item of cart.items">
      <img [src]="item.jersey.imageURL" alt="{{ item.jersey.team }} Jersey" style="width: 100px; height: auto;" />
      <p><strong>Equipo:</strong> {{ item.jersey.team }}</p>
      <p><strong>Precio:</strong> {{ item.jersey.price | currency:'EUR':'symbol' }}</p>
      <p><strong>Temporada:</strong> {{ item.jersey.season }}</p>
      <p><strong>Cantidad:</strong> {{ item.quantity }}</p>
      <button (click)="removeFromCart(item.jersey.id)">Eliminar</button>
      <hr />
    </div>
    <p><strong>Total:</strong> {{ calculateTotal() | currency:'EUR':'symbol' }}</p>
    <button (click)="sendEmail()">Enviar cesta por correo</button>
  </div>
  <p *ngIf="!cart">Cargando la cesta...</p>
</div>
<ng-template #notLoggedIn>
  <div class="not-logged-in">
    <p>Para ver su cesta, debe registrarse o iniciar sesión.</p>
    <button (click)="openRegisterPopup()">Registrarse / Iniciar Sesión</button>
  </div>
</ng-template>